{% extends "app/base.html" %}

{% block page_title %}{{ share_space.title }} by {{ share_space.user.username }}{% endblock page_title %}


{% block content %}
<div class="container mx-auto mt-6">
    <div class="space-header mb-6 flex justify-between items-center">
        <div>
            <h1 class="text-3xl font-semibold mb-1">{{ share_space.title }}<p class="inline font-semibold text-base text-gray-600 pl-2">by: {{ share_space.user.username }}</p></h1>
            <p class="text-gray-600">{{ share_space.description }}</p>
        </div>
        <div>
            <button class="options-button bg-blue-500 hover:bg-blue-700 text-white py-2 px-4 rounded inline-flex items-center">
                <i class="fas fa-cog mr-1"></i>
                <span>Options</span>
            </button>
            <div class="options-dropdown hidden absolute bg-white shadow-lg rounded-lg mt-2 py-2 w-48">
                <a href="{% url 'home' %}" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Edit ShareSpace</a>
                <a href="{% url 'home' %}" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Report</a>
                <a href="{% url 'delete_space' share_space.id %}" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Delete</a>
            </div>
        </div>
    </div>

    <table class="min-w-full leading-normal">
        <thead>
            <tr>
                <th class="px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">
                    File Name
                </th>
                <th class="px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">
                    Uploaded
                </th>
                <th class="px-5 py-3 border-b-2 border-gray-200 bg-gray-100"></th>
            </tr>
        </thead>
        <tbody>
            {% for file in files %}
            <tr class="hover:bg-gray-100 transition duration-300 ease-in-out">
                <td class="px-5 py-5 border-b border-gray-200 bg-white text-sm">
                    <div class="flex items-center">
                        <div class="ml-3">
                            <p class="text-gray-900 whitespace-no-wrap">
                                {{ file.filename }}
                            </p>
                        </div>
                    </div>
                </td>
                <td class="px-5 py-5 border-b border-gray-200 bg-white text-sm">
                    <p class="text-gray-900 whitespace-no-wrap">{{ file.time_uploaded_from_now }} ago</p>
                </td>
                <td class="px-5 py-5 border-b border-gray-200 bg-white text-sm text-right">
                    <a href="{% url 'download' file.id %}" class="text-blue-500 hover:text-blue-800 transition duration-300 ease-in-out">
                        <i class="fa-solid fa-eye"></i> View
                    </a>
                </td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="3" class="px-5 py-5 border-b border-gray-200 bg-white text-sm">
                    <p class="text-gray-900 whitespace-no-wrap text-center">No files in this share space yet.</p>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

</div>

<script>
    document.addEventListener('DOMContentLoaded', (event) => {
        // Select the options button and dropdown menu
        const optionsButton = document.querySelector('.options-button');
        const optionsDropdown = document.querySelector('.options-dropdown');

        // Add click event listener to the options button
        optionsButton.addEventListener('click', function() {
            // Toggle the 'hidden' class on the dropdown menu
            optionsDropdown.classList.toggle('hidden');
        });
    });
</script>

{% endblock content %}
